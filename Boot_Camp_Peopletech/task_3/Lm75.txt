Task_3
Interfacing LM75 with Raspberry Pi5 with Analysis of Driver code



ğŸ”¹ 1ï¸âƒ£ What is LM75? 
LM75 is a digital temperature sensor that communicates using the IÂ²C protocol.
ğŸ“Œ Key Features
ğŸŒ¡ï¸ Temperature range: âˆ’55Â°C to +125Â°C
ğŸ¯ Resolution: 0.125Â°C
ğŸ”Œ Interface: IÂ²C
ğŸ§  Internal registers for temperature & thresholds
ğŸ§ Supported directly by Linux hwmon subsystem
ğŸ‘‰ No custom driver needed!


ğŸ”¹ 2ï¸âƒ£ What is IÂ²C? 
IÂ²C is a 2-wire serial communication protocol:
SDA â†’ Data line
SCL â†’ Clock line
Multiple devices share the same bus using unique addresses.


ğŸ”¹ 3ï¸âƒ£ Hardware Connections ğŸ”§


ğŸ”¹ 4ï¸âƒ£ Enable IÂ²C on Raspberry Pi ğŸ› ï¸
sudo raspi-config
Enable:
Interfacing Options â†’ I2C â†’ Enable


ğŸ”¹ 5ï¸âƒ£ Verify IÂ²C Is Enabled âœ…
ls /dev/i2c-*
Expected:
/dev/i2c-1


ğŸ”¹ 6ï¸âƒ£ Scan IÂ²C Bus ğŸ”
i2cdetect -y 1
Expected output:
48
ğŸ‰ This confirms:
Hardware wiring is correct
LM75 is responding


ğŸ”¹ 7ï¸âƒ£ Load LM75 Kernel Driver ğŸ§ 
sudo modprobe lm75
Verify:
lsmod | grep lm75
Expected:
lm75
ğŸ‘‰ Driver is loaded, but device is not yet created.


ğŸ”¹ 8ï¸âƒ£ Create IÂ²C Device 
echo lm75 0x48 | sudo tee /sys/bus/i2c/devices/i2c-1/new_device
This tells Linux:
â€œAn LM75 sensor exists at address 0x48 on IÂ²C-1.â€


ğŸ”¹ 9ï¸âƒ£ Verify Kernel Messages ğŸ§¾
dmesg | tail -20
Key lines:
lm75 1-0048: hwmon4: sensor 'lm75'
i2c i2c-1: new_device: Instantiated device lm75 at 0x48
âœ” Driver probe executed
 âœ” hwmon device created


ğŸ”¹ ğŸ”Ÿ Find hwmon Entry ğŸ“‚
ls /sys/class/hwmon/
Example:
hwmon0 hwmon1 hwmon2 hwmon3 hwmon4
Expected:
hwmon4: lm75


ğŸ”¹ 1ï¸âƒ£1ï¸âƒ£ Read Temperature ğŸŒ¡ï¸
cat /sys/class/hwmon/hwmon4/temp1_input
Example:
30250


ğŸ”¹ 1ï¸âƒ£2ï¸âƒ£ Why Linux Shows 30250? ğŸ¤” (
Linux hwmon standard:
temp1_input = temperature Ã— 1000
So:
30250 â†’ 30.25 Â°C
25500 â†’ 25.50 Â°C
ğŸ‘‰ Kernel avoids floating-point math for performance & safety.


ğŸ”¹ 1ï¸âƒ£3ï¸âƒ£ Show Temperature as 25.50 Â°C (Shell) ğŸ§®
awk '{ printf "%.2f Â°C\n", $1/1000 }' /sys/class/hwmon/hwmon4/temp1_input
Output:
25.50 Â°C
ğŸ” Live Monitoring
watch -n 1 "awk '{ printf \"%.2f Â°C\n\", \$1/1000 }' /sys/class/hwmon/hwmon4/temp1_input"
Touch the sensor ğŸ‘‰ temperature increases ğŸ”¥


ğŸ”¹ 1ï¸âƒ£4ï¸âƒ£ Read Temperature Using C Program ğŸ‘¨â€ğŸ’»
lm75_read.c
Compile & Run
gcc lm75_read.c -o lm75_read
./lm75_read
Output:
Temperature: 25.50 Â°C
